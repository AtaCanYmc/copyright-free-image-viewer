<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Explorer - Project Assets</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono&display=swap"
          rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .folder-content { transition: all 0.3s ease-in-out; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 antialiased">

<nav class="bg-white border-b border-gray-200 px-6 py-4 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
        <div class="flex items-center gap-8">
            <h1 class="text-xl font-bold text-indigo-600 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="18" height="18" x="3" y="3" rx="2" ry="2"/>
                    <circle cx="9" cy="9" r="2"/>
                    <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                </svg>
                Assets
            </h1>
            <div class="hidden md:flex items-center bg-gray-100 p-1 rounded-xl">
                {% for page in pages %}
                <a href="{{ page.route }}"
                   class="px-4 py-2 rounded-lg text-sm font-semibold transition-all {% if request.path == page.route %} bg-white text-indigo-600 shadow-sm {% else %} text-gray-500 hover:text-gray-900 {% endif %}">
                    {{ page.name | capitalize }}
                </a>
                {% endfor %}
            </div>
        </div>
    </div>
</nav>

<main class="max-w-5xl mx-auto p-6 md:p-12">
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-10">
        <div>
            <h2 class="text-3xl font-extrabold text-gray-900 tracking-tight">Project Explorer</h2>
            <p class="text-gray-500 mt-1">Browse the physical directory structure of your assets.</p>
        </div>
        <div class="flex gap-2">
            <div class="px-4 py-2 bg-indigo-50 border border-indigo-100 rounded-xl flex items-center gap-2">
                <span class="text-xs font-bold text-indigo-700 uppercase">Project: {{ project_name }}</span>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-3xl shadow-sm border border-gray-200 overflow-hidden">
        <div class="p-6 border-b border-gray-100 bg-gray-50/30">
            <h3 class="text-xs font-bold uppercase tracking-wider text-gray-400">File Hierarchy</h3>
        </div>

        <div class="p-4">
            {% macro render_node(node, depth=0) %}
            <div class="select-none">
                <div class="group flex items-center justify-between py-3 px-4 rounded-2xl hover:bg-indigo-50/50 transition-colors cursor-pointer"
                     {% if node.type=='folder' %} onclick="toggleNode(this)" {% endif %}>

                    <div class="flex items-center gap-3" style="margin-left: {{ depth * 1.5 }}rem;">
                        <div class="w-8 h-8 rounded-lg flex items-center justify-center {% if node.type == 'folder' %} bg-amber-50 text-amber-500 {% else %} bg-blue-50 text-blue-500 {% endif %}">
                            {% if node.type == 'folder' %}
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                 fill="none"
                                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                 class="folder-icon">
                                <path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/>
                            </svg>
                            {% else %}
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                 fill="none"
                                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                                <polyline points="14.5 2 14.5 7 20 7"/>
                            </svg>
                            {% endif %}
                        </div>
                        <span class="{% if node.type == 'folder' %} font-bold text-gray-700 {% else %} text-gray-600 {% endif %} text-sm mono">
                                {{ node.name }}{% if node.type == 'folder' %}/{% endif %}
                            </span>
                    </div>

                    <div class="flex items-center gap-4">
                            <span class="text-xs font-semibold px-2 py-1 rounded-md {% if node.type == 'folder' %} bg-gray-100 text-gray-500 {% else %} bg-indigo-50 text-indigo-600 {% endif %}">
                                {{ node.type | capitalize }}
                            </span>
                    </div>
                </div>

                {% if node.children %}
                <div class="hidden folder-content border-l border-gray-100 ml-8 my-1">
                    {% for child in node.children %}
                    {{ render_node(child, depth + 1) }}
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% endmacro %}

            {{ render_node(tree_data) }}
        </div>
    </div>

    <div class="mt-8 flex items-start gap-4 p-6 bg-indigo-50 rounded-2xl border border-indigo-100">
        <div class="text-indigo-500 mt-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 16v-4"/>
                <path d="M12 8h.01"/>
            </svg>
        </div>
        <div>
            <h4 class="text-sm font-bold text-indigo-900">Live Asset Tracking</h4>
            <p class="text-sm text-indigo-700/80 leading-relaxed mt-1">
                This view represents the real-time file system inside your Docker container. Any image approved in the
                <span class="mono font-bold">Review</span> section will appear here instantly.
            </p>
        </div>
    </div>
</main>

<script>
    function toggleNode(el) {
        const content = el.nextElementSibling;
        if (content && content.classList.contains('folder-content')) {
            content.classList.toggle('hidden');
            const svg = el.querySelector('.folder-icon');
            // Optional: Folder icon animation or change
            if (content.classList.contains('hidden')) {
                el.classList.remove('bg-indigo-50/50');
            } else {
                el.classList.add('bg-indigo-50/50');
            }
        }
    }
</script>
</body>
</html>